\documentclass[12pt,oneside,a4paper]{book}
\usepackage[utf8]{inputenc}
\usepackage[spanish]{babel}
\usepackage{graphicx}
\usepackage[dvips]{epsfig}
\usepackage{amssymb}
\usepackage{eurosym}
\usepackage{float}
\usepackage{latexsym}
\usepackage{a4}
\usepackage{xcolor}
\usepackage{listings}
\usepackage{listingsutf8}
\usepackage{enumitem}
\usepackage[tikz]{bclogo}
\usepackage{hyperref} % menús no pdf pero non leva ben co package galician

\setlist{itemsep=1pt,topsep=1pt}
\addto\captionsgalician{\def\contentsname{Memoria tipo B -- \'{I}ndice xeral }}

\definecolor{backcolor}{rgb}{0.95,0.95,0.92}
\newcommand{\greencolor}{green!70!black}
\lstset{
  caption=\lstname,
  captionpos=b,
  label=lst:code,
  basicstyle=\ttfamily\footnotesize,
  numbers=left,
  commentstyle=\color{gray},
  keywordstyle=\color{blue},
  stringstyle=\color{\greencolor},
  showspaces=false,
  showstringspaces=false,
  showtabs=false,
  tabsize=2,
  keepspaces=true,
  breaklines=true,
  breakatwhitespace=false,
  frame=l,
  % framexleftmargin=8mm,
  % framextopmargin=2pt,
  backgroundcolor=\color{backcolor},
  rulesepcolor=\color{gray!50},
  postbreak=\mbox{\textcolor{red}{$\hookrightarrow$}\space},
  escapeinside={(*@}{@*)}
}
\renewcommand*{\lstlistlistingname}{Índice de Listings}

\lstdefinelanguage{Dockerfile}{
  keywords={FROM, RUN, COPY, ADD, ENTRYPOINT, CMD, ENV, ARG, WORKDIR, EXPOSE, LABEL, USER, VOLUME, STOPSIGNAL, ONBUILD, MAINTAINER, HEALTHCHECK},
  keywordstyle=\color{blue}\bfseries,
  identifierstyle=\color{black},
  comment=[l]{\#},
  commentstyle=\color{gray}\ttfamily,
  stringstyle=\color{\greencolor}\ttfamily,
  morestring=[b]',
  morestring=[b]"
}

\lstdefinelanguage{docker-compose}{
  keywords={services, depends_on, hostname, image, environment, container_name, ports, volumes, links},
  keywordstyle=\color{blue}\bfseries,
  identifierstyle=\color{black},
  comment=[l]{\#},
  commentstyle=\color{purple}\ttfamily,
  stringstyle=\color{\greencolor}\ttfamily,
  morestring=[b]',
  morestring=[b]"
}
\lstdefinelanguage{helm}{
  alsoletter={.,/},
  keywords={
    apiVersion, metadata, name, namespace, annotations,
    spec, status, data, port, number,
    replicas, selector, matchLabels, template, strategy, type,
    containers, initContainers, image, imagePullPolicy, command, args,
    ports, containerPort, hostPort, protocol, name,
    env, value, valueFrom, secretKeyRef, configMapKeyRef, key,
    resources, requests, limits, cpu, memory,
    volumeMounts, mountPath, readOnly, subPath,
    volumes, persistentVolumeClaim, claimName, secretName, configMap,
    restartPolicy, service, clusterIP, loadBalancerIP,
    externalIPs, sessionAffinity, servicePort, tls, stringData,
    rules, host, http, paths, path, pathType, backend, serviceName,
    Values, Release, Chart, Files, Capabilities, Template,
    include, tpl, toYaml, fromYaml, nindent, quote, required,
    networking, nodes, apiServerPort, extraPortMappings, role, project,
    source, repoURL, targetRevision, destination, syncPolicy, automated,
    prune, selfHeal, syncOptions, server, creation_rules, path_regex,
    unencrypted_regex, generators, config.kubernetes.io/function, exec,
    files, configs, cm, kustomize.buildOptions, ui.bannerpermanent, repoServer,
    emptyDir
  },
  keywordstyle=\color{blue}\bfseries,
  identifierstyle=\color{black},
  comment=[l]{\#},
  commentstyle=\color{gray}\ttfamily,
  stringstyle=\color{\greencolor}\ttfamily,
  morestring=[b]',
  morestring=[b]",
  moredelim=[s][\color{purple}\bfseries]{\{\{}{\}\}},
  literate={
    {kind:}{{{\textcolor{blue}{kind:}}}}5
    {secret:}{{{\textcolor{blue}{secret:}}}}7
    {age:}{{{\textcolor{blue}{age:}}}}4
    {image:}{{{\textcolor{blue}{image:}}}}6
  }
}

\lstdefinelanguage{workflows}{
  % Palabras clave principales de GitHub Actions
  alsoletter={-},
  keywords={
    name, on, jobs, runs-on, container, services, id,
    steps, uses, run, with, permissions, push, release,
    workflow_dispatch,
  },
  keywordstyle=\color{blue}\bfseries,
  identifierstyle=\color{black},
  % Comentarios en YAML con '#'
  comment=[l]{\#},
  commentstyle=\color{gray}\ttfamily,
  % Cadenas tal como en docker-compose
  stringstyle=\color{\greencolor}\ttfamily,
  morestring=[b]',
  morestring=[b]",
  % Resaltar expresiones entre {{ ... }} de posibles plantillas
  moredelim=[s][\color{purple}\bfseries]{\{\{}{\}\}},
  % Si quieres resaltar valores booleanos y números:
  morekeywords={true,false,null},
  keywordstyle=[2]\color{blue},
  sensitive=true,
}

% \includeonly{capitulos/cap2}

\begin{document}
\include{capitulos/titulo}
\clearpage
\include{capitulos/resumo} % páxina de resumo (optativa) 

\tableofcontents
\listoffigures
\listoftables
\lstlistoflistings

% Agora incluimos os capítulos. Cambiamos a numeración e as cabeceiras
\clearpage
\pagenumbering{arabic}
\setcounter{page}{1}
\pagestyle{headings}
\include{capitulos/introducion}
\clearpage
\include{capitulos/cap2}
\clearpage
\include{capitulos/cap3}
\clearpage
\include{capitulos/cap4}
\clearpage
\include{capitulos/exemplos}
%
% Engadir os capitulos que fagan falta
%
\cleardoublepage
\include{capitulos/conclusions}

% Aquí empezan os apéndices
\appendix
\cleardoublepage
\include{capitulos/apendicea}
\cleardoublepage
\include{capitulos/apendiceb}
\cleardoublepage
\include{capitulos/licenza}
\cleardoublepage
\include{capitulos/bibliografia}

\end{document}
